name = "chartable_app"
version = "1.0.0"

description = "An application to explore the Unicode database"
licences = ["Apache-2.0"]
links = [{ title = "Application", href = "https://chartable.glpda.net/" }]
target = "javascript"

[repository]
type = "github"
user = "glpda"
repo = "chartable"
path = "app"

[dependencies]
gleam_stdlib = ">= 0.44.0 and < 2.0.0"
chartable = { path = "../lib" }
lustre = ">= 5.3.5 and < 6.0.0"
modem = ">= 2.1.2 and < 3.0.0"

[dev-dependencies]
gleeunit = ">= 1.0.0 and < 2.0.0"
lustre_dev_tools = ">= 2.1.3 and < 3.0.0"

[javascript]
runtime = "deno"

[javascript.deno]
allow_env = true
allow_net = ["registry.npmjs.org:443"]
allow_read = [
    "./gleam.toml",
    "./src",
    "./build",
    "./test",
]
allow_write = [
    "./dist"
]

# [tools.lustre.bin]
# bun = "system"

[tools.lustre.build]
no_tailwind = true
# minify = true

[tools.lustre.html]
title = "CharTable 🎒"
lang = "en"
meta = [
    { name = "author", content = "Louis Guichard (glpda)" },
    { name = "description", content = "An application to explore the Unicode database." },
]
stylesheets = [
    { href = "/style.css" },
]
scripts = [
    { content = '''
(function() {
  const params = new URLSearchParams(window.location.search);
  const path = params.get('path');
  if (path) {
    window.history.replaceState(null, null, path);
  }
})();
''' },
]
body = '<div id="chartable"></div>'

